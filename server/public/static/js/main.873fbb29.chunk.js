(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{119:function(e,t,s){},353:function(e,t,s){},354:function(e,t,s){},355:function(e,t,s){},356:function(e,t,s){},358:function(e,t,s){},600:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),r=s(46),o=s.n(r),i=s(11),c=s(13),l=s(15),u=s(14),h=s(605),d=(s(234),s(119),s(51)),j=s.n(d),b=function e(){var t=this;Object(i.a)(this,e),this.signup=function(e){return t.app.post("/new-user",e)},this.login=function(e){return t.app.post("/login",e)},this.logout=function(){return t.app.get("/logout")},this.isLoggedIn=function(){return t.app.get("/isLoggedIn")},this.app=j.a.create({baseURL:"".concat("https://ih-tagger.herokuapp.com/api","/auth"),withCredentials:!0})},p=s(28),g=s(12),m=s(610),O=s(223),x=function e(){var t=this;Object(i.a)(this,e),this.myProfile=function(){return t.app.get("/current-user")},this.seeOtherProfile=function(e){return t.app.get("/".concat(e))},this.addFavUser=function(e){return t.app.put("/add-fav-user/".concat(e))},this.addFavTag=function(e){return t.app.put("/add-fav-tag/".concat(e))},this.getFavTags=function(){return t.app.get("/fav-tag-list")},this.removeFavTag=function(e){return t.app.put("/remove-fav-tag/".concat(e))},this.app=j.a.create({baseURL:"".concat("https://ih-tagger.herokuapp.com/api","/user"),withCredentials:!0})},v=function e(){var t=this;Object(i.a)(this,e),this.newPost=function(e){return t.app.post("/new",e)},this.getOnePost=function(e){return t.app.get("/".concat(e))},this.getByAuthor=function(e){return t.app.get("/getByAuthor/".concat(e))},this.getAllPosts=function(){return t.app.get("/getAllPosts")},this.editPost=function(e){return t.app.put("/".concat(e._id),e)},this.newComment=function(e,s){return t.app.post("/".concat(e,"/new-comment"),s)},this.getAllComments=function(e){return t.app.get("/".concat(e,"/allComments"))},this.app=j.a.create({baseURL:"".concat("https://ih-tagger.herokuapp.com/api","/post"),withCredentials:!0})},f=(s(152),s(229)),y=s(609),S=s(1),C=function(e){var t=e.message,s=e.onClose,a=Object(n.useState)(!0),r=Object(f.a)(a,2),o=r[0],i=r[1];return Object(S.jsxs)(y.a,{show:o,children:[Object(S.jsx)(y.a.Header,{children:Object(S.jsx)(y.a.Title,{children:"Ups..."})}),Object(S.jsx)(y.a.Body,{children:Object(S.jsx)("p",{children:t})}),Object(S.jsx)(y.a.Footer,{children:Object(S.jsx)(O.a,{variant:"secondary",onClick:function(){i(!1),s()},children:"Aceptar"})})]})},k=s(23),w=s(228),N=s(224),U=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(i.a)(this,s),(e=t.call(this)).state={editorState:k.EditorState.createEmpty()},e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){console.log(this.props.postContent),this.setState({editorState:k.EditorState.createWithContent(k.ContentState.createFromBlockArray(Object(k.convertFromHTML)(this.props.postContent)))})}},{key:"onEditorStateChange",value:function(e){this.setState({editorState:e}),this.props.updateState(Object(w.a)(e.getCurrentContent()))}},{key:"render",value:function(){var e=this,t=this.state.editorState;return Object(S.jsx)("div",{children:Object(S.jsx)(N.Editor,{toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"t-postEditor",editorState:t,onEditorStateChange:function(t){return e.onEditorStateChange(t)}})})}}]),s}(n.Component),B=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(i.a)(this,s),(e=t.call(this)).state={post:{_id:null,title:"",body:""},error:{exists:!1,message:null},hasLoaded:!1},e.userService=new x,e.postService=new v,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.postId;if("new"!==t)this.postService.getOnePost(t).then((function(t){e.setState({post:t.data,hasLoaded:!0})})).catch((function(e){return console.log(e)}));else{var s=Object(g.a)({},this.state);s.hasLoaded=!0,this.setState(s)}}},{key:"updateState",value:function(e){var t=Object(g.a)({},this.state.post);t.body=e,this.setState({post:t})}},{key:"handleTitleChange",value:function(e){var t=Object(g.a)({},this.state.post),s=e.target.value;t.title=s,this.setState({post:t})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),(null===this.state.post._id?this.postService.newPost(this.state.post):this.postService.editPost(this.state.post)).then((function(){t.props.history.push("/")})).catch((function(e){t.setState({error:{exists:!0,message:"Error al publicar el post. Aseg\xfarate de indicar t\xedtulo y texto."}})}))}},{key:"resetError",value:function(){this.setState({error:{exists:!1,message:null}})}},{key:"render",value:function(){var e=this;return e.state.hasLoaded?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(m.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(S.jsxs)(m.a.Group,{controlId:"title",children:[Object(S.jsx)(m.a.Label,{children:"T\xedtulo"}),Object(S.jsx)(m.a.Control,{type:"text",value:e.state.post.title,onChange:function(t){return e.handleTitleChange(t)},name:"title"})]}),Object(S.jsx)("br",{}),Object(S.jsx)(U,{updateState:function(t){return e.updateState(t)},postContent:e.state.post.body}),Object(S.jsx)(O.a,{className:"t-bgBtn",type:"submit",children:"Publicar post"}),Object(S.jsx)(O.a,{onClick:e.props.history.goBack,className:"btn goBackBtn btn-primary",children:"Volver"})]}),e.state.error.exists?Object(S.jsx)(C,{message:e.state.error.message,onClose:function(){return e.resetError()}}):null]}):null}}]),s}(n.Component),I=s(607),T=s(606),M=s(613),F=s(63),_=s(17),P=function(e){var t=e._id,s=e.title,n=e.body,a=e.author,r=e.authorIsUser;return Object(S.jsx)(h.a,{children:Object(S.jsx)(T.a,{children:Object(S.jsx)(M.a,{className:"t-card",children:Object(S.jsxs)(M.a.Body,{children:[Object(S.jsx)(M.a.Title,{children:s}),Object(S.jsx)(M.a.Subtitle,{className:"mb-2 text-muted",children:Object(S.jsx)(_.b,{className:"grey",to:"/user/".concat(a.username),children:a.displayName})}),Object(S.jsx)(M.a.Body,{children:Object(S.jsx)("div",{dangerouslySetInnerHTML:{__html:n}})}),r?Object(S.jsx)(_.b,{to:"/edit-post/".concat(t),children:Object(S.jsx)(O.a,{className:"editBtn",children:Object(S.jsx)(F.a,{})})}):null]})})})})},L=s(225),E=function(e){var t=e.body,s=e.author,n=e.date;return Object(S.jsx)(L.a,{md:3,children:Object(S.jsx)(M.a,{className:"t-card",children:Object(S.jsxs)(M.a.Body,{children:[Object(S.jsx)(M.a.Text,{children:t}),Object(S.jsx)(M.a.Subtitle,{className:"mb-2 text-muted",children:s.displayName}),Object(S.jsx)(M.a.Text,{children:n})]})})})},D=s(52),A=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={comment:{body:""}},n.postService=new v,n}return Object(c.a)(s,[{key:"handleInputChange",value:function(e){var t=e.target,s=t.name,n=t.value;this.setState({comment:Object(g.a)(Object(g.a)({},this.state.comment),{},Object(D.a)({},s,n))})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.postService.newComment(this.props.postId,this.state.comment).then((function(){t.props.closeModal(),t.props.refreshComments()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(S.jsxs)(m.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(S.jsx)(m.a.Group,{controlId:"body",children:Object(S.jsx)(m.a.Control,{type:"text",value:this.state.body,onChange:function(t){return e.handleInputChange(t)},name:"body"})}),Object(S.jsx)(O.a,{className:"t-bgBtn",style:{width:"100%"},type:"submit",children:"Publicar comentario"})]})}}]),s}(n.Component),G=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(i.a)(this,s),(e=t.call(this)).state={comments:void 0,showModal:!1},e.postService=new v,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.loadComments()}},{key:"loadComments",value:function(){var e=this;this.postService.getAllComments(this.props.postId).then((function(t){e.setState({comments:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.comments;return Object(S.jsxs)(S.Fragment,{children:[t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(O.a,{onClick:function(){return e.setState({showModal:!0})},className:"t-bgBtn",size:"sm",style:{marginBottom:"20px"},children:"A\xf1adir un comentario"}),Object(S.jsxs)(y.a,{show:e.state.showModal,onHide:function(){return e.setState({showModal:!1})},children:[Object(S.jsxs)(y.a.Header,{children:[" ",Object(S.jsx)(y.a.Title,{children:"Nuevo comentario"})," "]}),Object(S.jsx)(y.a.Body,{children:Object(S.jsx)(A,{postId:e.props.postId,loggedUser:e.props.loggedUser,closeModal:function(){return e.setState({showModal:!1})},refreshComments:function(){return e.loadComments()}})})]})]}):Object(S.jsx)(I.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})}),t&&!t.length?Object(S.jsx)("p",{children:"Este post no tiene comentarios a\xfan"}):t?Object(S.jsx)(T.a,{children:t.map((function(e){return Object(S.jsx)(E,Object(g.a)({},e),e._id)}))}):void 0]})}}]),s}(n.Component),H=function(e){var t=e.loggedUser,s=e.postId;return Object(S.jsxs)(h.a,{children:[Object(S.jsx)("hr",{}),Object(S.jsx)("h3",{children:"Comentarios de este post"}),Object(S.jsx)("hr",{}),Object(S.jsx)(G,{loggedUser:t,postId:s})]})},R=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(i.a)(this,s),(e=t.call(this)).state={post:void 0},e.postService=new v,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.postId;this.postService.getOnePost(t).then((function(t){return e.setState({post:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return Object(S.jsx)(h.a,{children:this.state.post?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(P,Object(g.a)(Object(g.a)({},this.state.post),{},{authorIsUser:this.props.loggedUser._id===this.state.post.author._id})),Object(S.jsx)(O.a,{onClick:this.props.history.goBack,className:"btn goBackBtn btn-primary",children:"Volver"}),Object(S.jsx)(H,{loggedUser:this.props.loggedUser,postId:this.state.post._id})]}):Object(S.jsx)(I.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})})})}}]),s}(n.Component),z=function(e){var t=e._id,s=e.title,n=e.author,a=e.body;e.history;return Object(S.jsx)(_.b,{to:"/posts/".concat(t),className:"no-decor",children:Object(S.jsx)(M.a,{className:"marged t-bgColor t-card",children:Object(S.jsxs)(M.a.Body,{className:"lat-padded",children:[Object(S.jsx)(M.a.Title,{className:"big",children:s}),Object(S.jsx)(M.a.Subtitle,{className:"mb-2 text-muted",children:n.displayName}),Object(S.jsx)(M.a.Text,{children:Object(S.jsx)("span",{className:"t-italic",dangerouslySetInnerHTML:{__html:a.slice(0,100).replace(/(<([^>]+)>)/gi,"")}})})]})})})},V=(s(353),function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(i.a)(this,s),(e=t.call(this)).state={posts:void 0},e.postService=new v,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.loadPosts()}},{key:"loadPosts",value:function(){var e=this;this.postService.getAllPosts().then((function(t){return e.setState({posts:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.posts;return t?Object(S.jsxs)(S.Fragment,{children:["USER"===this.props.loggedUser.role?Object(S.jsx)(_.b,{to:"/edit-post/new",className:"t-bgBtn btn btn-primary",children:"Crear nuevo post"}):null,Object(S.jsx)("div",{className:"posts-list",children:t.map((function(t){return Object(S.jsx)(z,Object(g.a)(Object(g.a)({},t),{},{authorIsUser:e.props.loggedUser._id===t.author._id,history:e.props.history}),t._id)}))})]}):Object(S.jsx)(I.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})})}}]),s}(n.Component)),q=function(e){var t=e.loggedUser,s=e.history;return Object(S.jsxs)(h.a,{children:[Object(S.jsx)("hr",{}),Object(S.jsx)(V,{loggedUser:t,history:s})]})},J=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(i.a)(this,s),(e=t.call(this)).state={username:"",pwd:"",displayName:"",email:"",birthdate:"",error:{exists:!1,message:null}},e.authService=new b,e}return Object(c.a)(s,[{key:"handleInputChange",value:function(e){var t=e.target,s=t.name,n=t.value;this.setState(Object(D.a)({},s,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.authService.signup(this.state).then((function(e){t.props.history.push("/login")})).catch((function(e){t.setState({error:{exists:!0,message:"Error al crear tu usuario. Quiz\xe1 ya seas user. \n                                Si no lo eres, comprueba tus datos (recuerda que todos \n                                los campos son obligatorios)."}})}))}},{key:"resetError",value:function(){this.setState({error:{exists:!1,message:null}})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(m.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(S.jsxs)(m.a.Group,{controlId:"displayName",children:[Object(S.jsx)(m.a.Label,{children:"Nombre completo"}),Object(S.jsx)(m.a.Control,{type:"text",value:this.state.displayName,onChange:function(t){return e.handleInputChange(t)},name:"displayName"})]}),Object(S.jsxs)(m.a.Group,{controlId:"username",children:[Object(S.jsx)(m.a.Label,{children:"Nombre de usuario"}),Object(S.jsx)(m.a.Control,{type:"text",value:this.state.username,onChange:function(t){return e.handleInputChange(t)},name:"username"})]}),Object(S.jsxs)(m.a.Group,{controlId:"email",children:[Object(S.jsx)(m.a.Label,{children:"Mail"}),Object(S.jsx)(m.a.Control,{type:"email",value:this.state.email,onChange:function(t){return e.handleInputChange(t)},name:"email"})]}),Object(S.jsxs)(m.a.Group,{controlId:"password",children:[Object(S.jsx)(m.a.Label,{children:"Password"}),Object(S.jsx)(m.a.Control,{type:"password",value:this.state.pwd,onChange:function(t){return e.handleInputChange(t)},name:"pwd"})]}),Object(S.jsxs)(m.a.Group,{controlId:"birthdate",children:[Object(S.jsx)(m.a.Label,{children:"Fecha de nacimiento"}),Object(S.jsx)(m.a.Control,{type:"date",value:this.state.birthdate,onChange:function(t){return e.handleInputChange(t)},name:"birthdate"})]}),Object(S.jsx)(O.a,{className:"t-bgBtn",style:{width:"100%"},type:"submit",children:"\xa1Vamos all\xe1!"}),Object(S.jsx)(_.b,{className:"btn t-bgBtn btn-primary t-bgBtn",style:{width:"100%"},to:"/login",children:"S\xed que soy tagger"})]}),this.state.error.exists?Object(S.jsx)(C,{message:this.state.error.message,onClose:function(){return e.resetError()}}):null]})}}]),s}(n.Component),Q=function(e){var t=e.storeUser,s=e.history;return Object(S.jsx)(h.a,{children:Object(S.jsx)(T.a,{className:"justify-content-center",children:Object(S.jsxs)(L.a,{md:6,children:[Object(S.jsx)("h1",{children:"Registro"}),Object(S.jsx)("hr",{}),Object(S.jsx)(J,{storeUser:t,history:s}),Object(S.jsx)("hr",{})]})})})},W=function e(){var t=this;Object(i.a)(this,e),this.newTag=function(e){return t.app.post("/new-tag",e)},this.getOneTag=function(e){return t.app.get("/edit-tag/".concat(e))},this.editTag=function(e){return t.app.put("/edit-tag/".concat(e._id),e)},this.getAllUsers=function(){return t.app.get("/users-list")},this.deleteOneUser=function(e){return t.app.delete("/delete-user/".concat(e))},this.deleteOnePost=function(e){return t.app.delete("/delete-post/".concat(e))},this.deleteOneTag=function(e){return t.app.delete("/delete-tag/".concat(e))},this.app=j.a.create({baseURL:"".concat("https://ih-tagger.herokuapp.com/api","/admin"),withCredentials:!0})},X=(s(354),function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={tag:{name:"",_id:"",description:""}},n.adminService=new W,n.userService=new x,n}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.setState({tag:this.props.tag})}},{key:"handleSubmit",value:function(e){var t=this;this.adminService.editTag(this.state.tag).then((function(){t.props.refreshTags()})).catch((function(e){return console.log(e)}))}},{key:"addFavBtn",value:function(){var e=this;this.userService.addFavTag(this.state.tag.name).then((function(){e.props.refreshTags()})).catch((function(e){return console.log(e)}))}},{key:"removeFavBtn",value:function(){var e=this;this.userService.removeFavTag(this.state.tag.name).then((function(){e.props.refreshTags()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(S.jsx)(L.a,{md:4,children:Object(S.jsx)(M.a,{className:"t-card",children:Object(S.jsxs)(M.a.Body,{children:[Object(S.jsx)(M.a.Title,{children:this.state.tag.name}),Object(S.jsx)(M.a.Text,{children:this.state.tag.description}),"ADMIN"===e.props.loggedUser.role?Object(S.jsx)(O.a,{className:"editBtn",onClick:function(){return e.props.showEditModal()},children:Object(S.jsx)(F.a,{})}):e.props.isFav?Object(S.jsx)(O.a,{className:"btn btn-danger removeFavBtn",onClick:function(){return e.removeFavBtn()},children:Object(S.jsx)(F.c,{})}):Object(S.jsx)(O.a,{className:"favBtn",onClick:function(){return e.addFavBtn()},children:Object(S.jsx)(F.b,{})})]})})})}}]),s}(n.Component)),Y=function e(){var t=this;Object(i.a)(this,e),this.getAllTags=function(){return t.app.get("/tag-list")},this.getAvailableTags=function(){return t.app.get("/available-tag-list")},this.app=j.a.create({baseURL:"".concat("https://ih-tagger.herokuapp.com/api","/tag"),withCredentials:!0})},K=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={tag:{_id:null,name:"",description:""},error:{exists:!1,message:null},isNew:!0},n.adminService=new W,n}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.setState({isNew:this.props.isNew,tag:Object(g.a)({},this.props.tagData)})}},{key:"handleInputChange",value:function(e){var t=e.target,s=t.name,n=t.value;this.setState({tag:Object(g.a)(Object(g.a)({},this.state.tag),{},Object(D.a)({},s,n))})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),(this.state.isNew?this.adminService.newTag(this.state.tag):this.adminService.editTag(this.state.tag)).then((function(){t.props.closeModal(),t.props.refreshTags()})).catch((function(e){t.setState({error:{exists:!0,message:"Error al ".concat(t.state.isNew?"crear":"editar"," la etiqueta. No se admiten nombres duplicados ni vac\xedos.")}})}))}},{key:"resetError",value:function(){this.setState({error:{exists:!1,message:null}})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(m.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(S.jsxs)(m.a.Group,{controlId:"name",children:[Object(S.jsx)(m.a.Label,{children:"Nombre"}),Object(S.jsx)(m.a.Control,{type:"text",value:this.state.tag.name,onChange:function(t){return e.handleInputChange(t)},name:"name"})]}),Object(S.jsxs)(m.a.Group,{controlId:"description",children:[Object(S.jsx)(m.a.Label,{children:"Descripci\xf3n"}),Object(S.jsx)(m.a.Control,{type:"text",value:this.state.tag.description,onChange:function(t){return e.handleInputChange(t)},name:"description"})]}),Object(S.jsxs)(O.a,{className:"t-bgBtn",style:{width:"100%"},type:"submit",children:[this.state.isNew?"Crear":"Editar"," tag"]})]}),this.state.error.exists?Object(S.jsx)(C,{message:this.state.error.message,onClose:function(){return e.resetError()}}):null]})}}]),s}(n.Component),Z=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(i.a)(this,s),(e=t.call(this)).state={tags:void 0,showModal:!1,isCreationModal:!1,selectedTagData:{_id:null,name:"",description:""}},e.adminService=new W,e.tagService=new Y,e.userService=new x,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.loadTags()}},{key:"loadTags",value:function(){var e=this;(this.props.onlyFav?this.userService.getFavTags():"ADMIN"===this.props.loggedUser.role?this.tagService.getAllTags():this.tagService.getAvailableTags()).then((function(t){e.setState({tags:[]}),e.setState({tags:t.data})})).catch((function(e){return console.log(e)}))}},{key:"showEditModal",value:function(e){var t=e._id,s=e.name,n=e.description;this.setState({showModal:!0,isCreationModal:!1,selectedTagData:{_id:t,name:s,description:n}})}},{key:"render",value:function(){var e=this,t=this.state.tags;return t?Object(S.jsxs)(S.Fragment,{children:["ADMIN"===e.props.loggedUser.role?Object(S.jsx)(O.a,{onClick:function(){return e.setState({showModal:!0,isCreationModal:!0})},className:"t-bgBtn",size:"sm",style:{marginBottom:"20px"},children:" A\xf1adir una tag nueva"}):null,Object(S.jsx)(T.a,{children:t.map((function(t){return Object(S.jsx)(X,{tag:Object(g.a)({},t),refreshTags:function(){return e.loadTags()},loggedUser:e.props.loggedUser,showEditModal:function(){return e.showEditModal(Object(g.a)({},t))},isFav:e.props.onlyFav},t._id)}))}),Object(S.jsx)(O.a,{onClick:this.props.history.goBack,className:"btn goBackBtn btn-primary",children:"Volver"}),Object(S.jsxs)(y.a,{show:this.state.showModal,onHide:function(){return e.setState({showModal:!1})},children:[Object(S.jsxs)(y.a.Header,{children:[" ",Object(S.jsxs)(y.a.Title,{children:[this.state.isCreationModal?"Nueva":"Editar"," tag"]})," "]}),Object(S.jsx)(y.a.Body,{children:Object(S.jsx)(K,{loggedUser:this.props.loggedUser,closeModal:function(){return e.setState({showModal:!1})},refreshTags:function(){return e.loadTags()},isNew:this.state.isCreationModal,tagData:Object(g.a)({},this.state.selectedTagData)})})]})]}):Object(S.jsx)(I.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})})}}]),s}(n.Component),$=function(e){var t=e.loggedUser,s=e.history,n=e.onlyFav;return Object(S.jsxs)(h.a,{children:[Object(S.jsx)("h1",{children:n?"Tags favoritas":"Listado de tags"}),Object(S.jsx)("hr",{}),Object(S.jsx)(Z,{loggedUser:t,history:s,onlyFav:n})]})},ee=function(e){var t=e.displayName,s=e.username,n=e.image,a=e.email;return Object(S.jsx)(h.a,{children:Object(S.jsx)(T.a,{children:Object(S.jsx)(L.a,{children:Object(S.jsx)(M.a,{className:"t-card",children:Object(S.jsxs)(M.a.Body,{children:[Object(S.jsx)(M.a.Img,{children:n}),Object(S.jsx)(M.a.Title,{children:s}),Object(S.jsx)(M.a.Subtitle,{className:"mb-2 text-muted",children:t}),Object(S.jsx)(M.a.Text,{children:a})]})})})})})},te=function(){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(_.b,{to:"/users",className:"btn btn-primary t-bgBtn",children:"Lista de Users"})})},se=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(i.a)(this,s),(e=t.call(this)).state={user:void 0,posts:[]},e.userService=new x,e.postService=new v,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){var e,t=this;if(this.props.isOwnProfile)e=this.userService.myProfile();else{var s=this.props.match.params.username;e=this.userService.seeOtherProfile(s)}e.then((function(e){return t.setState({user:e.data}),e.data})).then((function(e){return t.postService.getByAuthor(e._id)})).then((function(e){t.setState({posts:e.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(S.jsx)(h.a,{children:this.state.user?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("h1",{children:["Perfil de ",this.state.user.username]}),Object(S.jsx)(ee,Object(g.a)({},this.state.user)),Object(S.jsx)(O.a,{onClick:this.props.history.goBack,className:"btn goBackBtn btn-primary",children:"Volver"}),Object(S.jsx)("hr",{}),"ADMIN"===e.props.loggedUser.role&&e.props.loggedUser.username===e.state.user.username?Object(S.jsx)(te,{}):e.props.isOwnProfile?Object(S.jsx)(_.b,{to:"/fav-tags",className:"btn t-bgBtn btn-primary",children:"Lista de tags favoritas"}):void 0,Object(S.jsx)("div",{className:"posts-list",children:this.state.posts.map((function(t){return Object(S.jsx)(z,Object(g.a)(Object(g.a)({},t),{},{authorIsUser:e.props.loggedUser._id===t.author._id,history:e.props.history}),t._id)}))})]}):Object(S.jsx)(I.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})})})}}]),s}(n.Component),ne=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(i.a)(this,s),(e=t.call(this)).state={username:"",pwd:"",error:{exists:!1,message:null}},e.authService=new b,e}return Object(c.a)(s,[{key:"handleInputChange",value:function(e){var t=e.target,s=t.name,n=t.value;this.setState(Object(D.a)({},s,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.authService.login(this.state).then((function(e){t.props.storeUser(e.data),t.props.history.push("/")})).catch((function(e){t.setState({error:{exists:!0,message:"El usuario o la contrase\xf1a son incorrectos."}})}))}},{key:"resetError",value:function(){this.setState({error:{exists:!1,message:null}})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(m.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(S.jsxs)(m.a.Group,{controlId:"username",children:[Object(S.jsx)(m.a.Label,{children:"Nombre de usuario"}),Object(S.jsx)(m.a.Control,{type:"text",value:this.state.username,onChange:function(t){return e.handleInputChange(t)},name:"username"})]}),Object(S.jsxs)(m.a.Group,{controlId:"password",children:[Object(S.jsx)(m.a.Label,{children:"Password"}),Object(S.jsx)(m.a.Control,{type:"password",value:this.state.pwd,onChange:function(t){return e.handleInputChange(t)},name:"pwd"})]}),Object(S.jsx)(O.a,{className:"t-bgBtn",style:{width:"100%",marginTop:"20px"},type:"submit",children:"Iniciar sesi\xf3n"})]}),this.state.error.exists?Object(S.jsx)(C,{message:this.state.error.message,onClose:function(){return e.resetError()}}):null]})}}]),s}(n.Component),ae=function(e){var t=e.storeUser,s=e.history;return Object(S.jsx)(h.a,{children:Object(S.jsx)(T.a,{className:"justify-content-center",children:Object(S.jsxs)(L.a,{md:6,children:[Object(S.jsx)("h1",{children:"Inicio de sesi\xf3n"}),Object(S.jsx)("hr",{}),Object(S.jsx)(ne,{storeUser:t,history:s}),Object(S.jsx)("hr",{}),Object(S.jsx)(_.b,{to:"/signup",className:"btn t-bgBtn btn-primary",children:"\xbfA\xfan no eres un tagger? \xa1\xdanete!"})]})})})},re=(s(355),function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={user:{username:"",_id:"",displayName:""}},n.adminService=new W,n}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.setState({user:this.props.user})}},{key:"handleSubmit",value:function(e){var t=this;this.adminService.deleteOneUser(this.state.user._id).then((function(){t.props.refreshUsers()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(S.jsx)(L.a,{md:3,children:Object(S.jsx)(M.a,{className:"t-card",children:Object(S.jsxs)(M.a.Body,{children:[Object(S.jsx)(M.a.Title,{children:Object(S.jsx)(_.b,{className:"black",to:"/user/".concat(this.state.user.username),children:this.state.user.username})}),Object(S.jsx)(M.a.Subtitle,{className:"mb-2 text-muted",children:this.state.user.displayName}),Object(S.jsx)(O.a,{className:"removeUserBtn btn-danger",onClick:function(){return e.handleSubmit(e.state.user.userId)},children:Object(S.jsx)(F.c,{})})]})})})}}]),s}(n.Component)),oe=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(i.a)(this,s),(e=t.call(this)).state={users:void 0},e.adminService=new W,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.loadUsers()}},{key:"loadUsers",value:function(){var e=this;this.adminService.getAllUsers().then((function(t){e.setState({users:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.users;return t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(T.a,{children:t.map((function(t){return Object(S.jsx)(re,{user:Object(g.a)({},t),refreshUsers:function(){return e.loadUsers()}},t._id)}))}),Object(S.jsx)(O.a,{onClick:this.props.history.goBack,className:"btn goBackBtn btn-primary",children:"Volver"})]}):Object(S.jsx)(I.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})})}}]),s}(n.Component),ie=function(e){var t=e.loggedUser,s=e.history;return Object(S.jsxs)(h.a,{children:[Object(S.jsx)("h1",{children:"Listado de users"}),Object(S.jsx)("hr",{}),Object(S.jsx)(oe,{loggedUser:t,history:s})]})},ce=s(117),le=function(e){var t=e.component,s=e.loggedUser,n=e.hasPermission,a=e.path,r=Object(ce.a)(e,["component","loggedUser","hasPermission","path"]);return Object(S.jsx)(p.b,Object(g.a)(Object(g.a)({path:a},r),{},{render:function(e){return s&&n?Object(S.jsx)(t,Object(g.a)(Object(g.a)({},e),{},{loggedUser:s,history:e.history},r)):Object(S.jsx)(p.a,{to:"/login"})}}))},ue=function(e){var t=e.component,s=e.loggedUser,n=e.storeUser,a=e.path,r=Object(ce.a)(e,["component","loggedUser","storeUser","path"]);return Object(S.jsx)(p.b,Object(g.a)(Object(g.a)({path:a},r),{},{render:function(e){return s?Object(S.jsx)(p.a,{to:"/"}):Object(S.jsx)(t,Object(g.a)(Object(g.a)({},e),{},{storeUser:n,history:e.history}))}}))},he=function(e){var t=e.storeUser,s=e.loggedUser;return Object(S.jsxs)(p.d,{children:["(",Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(ue,{exact:!0,path:"/login",loggedUser:s,storeUser:t,component:ae}),Object(S.jsx)(ue,{exact:!0,path:"/signup",loggedUser:s,storeUser:t,component:Q}),Object(S.jsx)(le,{exact:!0,path:"/",loggedUser:s,hasPermission:!0,component:q}),Object(S.jsx)(le,{exact:!0,path:"/users",loggedUser:s,hasPermission:s&&"ADMIN"===s.role,component:ie}),Object(S.jsx)(le,{exact:!0,path:"/my-profile",loggedUser:s,hasPermission:!0,isOwnProfile:!0,component:se}),Object(S.jsx)(le,{exact:!0,path:"/user/:username",loggedUser:s,hasPermission:!0,isOwnProfile:!1,component:se}),Object(S.jsx)(le,{exact:!0,path:"/tags",loggedUser:s,hasPermission:!0,onlyFav:!1,component:$}),Object(S.jsx)(le,{exact:!0,path:"/fav-tags",loggedUser:s,hasPermission:!0,onlyFav:!0,component:$}),Object(S.jsx)(le,{path:"/posts/:postId",loggedUser:s,hasPermission:!0,component:R}),Object(S.jsx)(le,{path:"/edit-post/:postId",loggedUser:s,hasPermission:s&&"USER"===s.role,component:B})]}),")"]})},de=s(611),je=s(612),be=s(608),pe=(s(356),function(e){var t=e.loggedUser,s=e.storeUser;return Object(S.jsxs)(de.a,{variant:"dark",className:"justify-content-around navigation",children:[Object(S.jsx)(_.b,{to:"/",children:Object(S.jsx)(de.a.Brand,{children:Object(S.jsx)("img",{src:"/white-logo.png",width:"30",height:"30",className:"d-inline-block align-top t-logo",alt:"tagger logo"})})}),Object(S.jsx)(je.a,{className:"mr-auto",children:t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(_.b,{to:"/my-profile",className:"nav-link t-profileBtn",children:Object(S.jsxs)("p",{children:[" | Hola, ",t.username," | "]})}),Object(S.jsxs)(be.a,{title:"Men\xfa",className:"t-link",children:["USER"===t.role?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(_.b,{to:"/edit-post/new",className:"nav-link",children:Object(S.jsx)("p",{children:"Post nuevo"})}),Object(S.jsx)(_.b,{to:"/tags",className:"nav-link",children:Object(S.jsx)("p",{children:"Lista de tags"})})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(_.b,{to:"/tags",className:"nav-link",children:Object(S.jsx)("p",{children:"Lista de tags"})}),Object(S.jsx)(_.b,{to:"/users",className:"nav-link",children:Object(S.jsx)("p",{children:"Lista de users"})})]}),Object(S.jsx)("span",{onClick:function(){(new b).logout().then((function(){s(void 0)})).catch((function(e){return console.log(e)}))},className:"nav-link logoutBtn",children:"Cerrar sesi\xf3n"})]})]}):Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(p.a,{to:"/login"})})})]})}),ge=(s(358),function(){return Object(S.jsx)("footer",{children:"Proudly founded by Nat Canales | All rights reserved"})}),me=s(227),Oe=s.n(me),xe={width:"99vw",height:"100%",position:"fixed",top:0,left:0,zIndex:-1},ve=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){return Object(i.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){return Object(S.jsx)("div",{style:xe,children:Object(S.jsx)(Oe.a,{params:{particles:{number:{value:200,density:{enable:!0,value_area:1803.4120608655228}},color:{value:"#FF0080"},shape:{type:"star",stroke:{width:0,color:"#000000"},polygon:{nb_sides:4},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:1,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:0,color:"#000",opacity:.3687847739990702,width:.6413648243462091},move:{enable:!0,speed:2,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"window",events:{onhover:{enable:!0,mode:"repulse"},onclick:{enable:!1,mode:"bubble"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:100,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0}})})}}]),s}(n.Component),fe=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(i.a)(this,s),(e=t.call(this)).storeUser=function(t){e.setState({loggedUser:t})},e.fetchUser=function(){e.authService.isLoggedIn().then((function(t){return e.setState({loggedUser:t.data})})).catch((function(){return e.setState({loggedUser:void 0})}))},e.state={loggedUser:void 0},e.authService=new b,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(pe,{storeUser:function(t){return e.storeUser(t)},loggedUser:this.state.loggedUser}),Object(S.jsxs)(h.a,{className:"padded",children:[Object(S.jsx)(he,{storeUser:function(t){return e.storeUser(t)},loggedUser:this.state.loggedUser}),Object(S.jsx)(ve,{})]}),Object(S.jsx)(ge,{})]})}}]),s}(n.Component);o.a.render(Object(S.jsx)(_.a,{children:Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(fe,{})})}),document.getElementById("root"))}},[[600,1,2]]]);
//# sourceMappingURL=main.873fbb29.chunk.js.map