(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{234:function(e,t,n){},353:function(e,t,n){},354:function(e,t,n){},355:function(e,t,n){},356:function(e,t,n){},358:function(e,t,n){},600:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),r=n(46),c=n.n(r),o=n(11),i=n(13),l=n(15),u=n(14),h=n(605),j=(n(233),n(234),n(51)),d=n.n(j),b=function e(){var t=this;Object(o.a)(this,e),this.signup=function(e){return t.app.post("/new-user",e)},this.login=function(e){return t.app.post("/login",e)},this.logout=function(){return t.app.get("/logout")},this.isLoggedIn=function(){return t.app.get("/isLoggedIn")},this.app=d.a.create({baseURL:"".concat("https://ih-tagger.herokuapp.com/api","/auth"),withCredentials:!0})},p=n(28),m=n(12),O=n(610),g=n(222),x=function e(){var t=this;Object(o.a)(this,e),this.myProfile=function(){return t.app.get("/current-user")},this.seeOtherProfile=function(e){return t.app.get("/".concat(e))},this.addFavUser=function(e){return t.app.put("/add-fav-user/".concat(e))},this.addFavTag=function(e){return t.app.put("/add-fav-tag".concat(e))},this.app=d.a.create({baseURL:"".concat("https://ih-tagger.herokuapp.com/api","/user"),withCredentials:!0})},f=function e(){var t=this;Object(o.a)(this,e),this.newPost=function(e){return t.app.post("/new",e)},this.getOnePost=function(e){return t.app.get("/".concat(e))},this.getAllPosts=function(){return t.app.get("/getAllPosts")},this.editPost=function(e){return t.app.put("/".concat(e._id),e)},this.newComment=function(e,n){return t.app.post("/".concat(e,"/new-comment"),n)},this.getAllComments=function(e){return t.app.get("/".concat(e,"/allComments"))},this.app=d.a.create({baseURL:"".concat("https://ih-tagger.herokuapp.com/api","/post"),withCredentials:!0})},v=(n(151),n(228)),y=n(609),S=n(1),C=function(e){var t=e.message,n=e.onClose,a=Object(s.useState)(!0),r=Object(v.a)(a,2),c=r[0],o=r[1];return Object(S.jsxs)(y.a,{show:c,children:[Object(S.jsx)(y.a.Header,{children:Object(S.jsx)(y.a.Title,{children:"Ups..."})}),Object(S.jsx)(y.a.Body,{children:Object(S.jsx)("p",{children:t})}),Object(S.jsx)(y.a.Footer,{children:Object(S.jsx)(g.a,{variant:"secondary",onClick:function(){o(!1),n()},children:"Aceptar"})})]})},U=n(23),k=n(227),w=n(223),N=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={editorState:U.EditorState.createEmpty()},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){console.log(this.props.postContent),this.setState({editorState:U.EditorState.createWithContent(U.ContentState.createFromBlockArray(Object(U.convertFromHTML)(this.props.postContent)))})}},{key:"onEditorStateChange",value:function(e){this.setState({editorState:e}),this.props.updateState(Object(k.a)(e.getCurrentContent()))}},{key:"render",value:function(){var e=this,t=this.state.editorState;return Object(S.jsx)("div",{children:Object(S.jsx)(w.Editor,{toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"t-postEditor",editorState:t,onEditorStateChange:function(t){return e.onEditorStateChange(t)}})})}}]),n}(s.Component),I=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={post:{_id:null,title:"",body:""},error:{exists:!1,message:null},hasLoaded:!1},e.userService=new x,e.postService=new f,e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.postId;if("new"!==t)this.postService.getOnePost(t).then((function(t){e.setState({post:t.data,hasLoaded:!0})})).catch((function(e){return console.log(e)}));else{var n=Object(m.a)({},this.state);n.hasLoaded=!0,this.setState(n)}}},{key:"updateState",value:function(e){var t=Object(m.a)({},this.state.post);t.body=e,this.setState({post:t})}},{key:"handleTitleChange",value:function(e){var t=Object(m.a)({},this.state.post),n=e.target.value;t.title=n,this.setState({post:t})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),(null===this.state.post._id?this.postService.newPost(this.state.post):this.postService.editPost(this.state.post)).then((function(){t.props.history.push("/")})).catch((function(e){t.setState({error:{exists:!0,message:"Error al publicar el post. Aseg\xfarate de indicar t\xedtulo y texto."}})}))}},{key:"resetError",value:function(){this.setState({error:{exists:!1,message:null}})}},{key:"render",value:function(){var e=this;return e.state.hasLoaded?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(O.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(S.jsxs)(O.a.Group,{controlId:"title",children:[Object(S.jsx)(O.a.Label,{children:"T\xedtulo"}),Object(S.jsx)(O.a.Control,{type:"text",value:e.state.post.title,onChange:function(t){return e.handleTitleChange(t)},name:"title"})]}),Object(S.jsx)("br",{}),Object(S.jsx)(N,{updateState:function(t){return e.updateState(t)},postContent:e.state.post.body}),Object(S.jsx)(g.a,{className:"t-bgBtn",type:"submit",children:"Publicar post"})]}),e.state.error.exists?Object(S.jsx)(C,{message:e.state.error.message,onClose:function(){return e.resetError()}}):null]}):null}}]),n}(s.Component),T=n(607),B=n(606),M=n(613),_=n(72),L=n(22),P=function(e){var t=e._id,n=e.title,s=e.body,a=e.author,r=e.authorIsUser;return Object(S.jsx)(h.a,{children:Object(S.jsx)(B.a,{children:Object(S.jsx)(M.a,{children:Object(S.jsxs)(M.a.Body,{children:[Object(S.jsx)(M.a.Title,{children:n}),Object(S.jsx)(M.a.Subtitle,{className:"mb-2 text-muted",children:a.displayName}),Object(S.jsx)(M.a.Body,{children:Object(S.jsx)("div",{dangerouslySetInnerHTML:{__html:s}})}),r?Object(S.jsx)(L.b,{to:"/edit-post/".concat(t),children:Object(S.jsx)(g.a,{className:"editBtn",children:Object(S.jsx)(_.a,{})})}):null]})})})})},E=n(224),F=function(e){var t=e.body,n=e.author,s=e.date;return Object(S.jsx)(E.a,{md:3,children:Object(S.jsx)(M.a,{children:Object(S.jsxs)(M.a.Body,{children:[Object(S.jsx)(M.a.Text,{children:t}),Object(S.jsx)(M.a.Subtitle,{className:"mb-2 text-muted",children:n.displayName}),Object(S.jsx)(M.a.Text,{children:s})]})})})},A=n(52),D=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={comment:{body:""}},s.postService=new f,s}return Object(i.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n=t.name,s=t.value;this.setState({comment:Object(m.a)(Object(m.a)({},this.state.comment),{},Object(A.a)({},n,s))})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.postService.newComment(this.props.postId,this.state.comment).then((function(){t.props.closeModal(),t.props.refreshComments()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(S.jsxs)(O.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(S.jsx)(O.a.Group,{controlId:"body",children:Object(S.jsx)(O.a.Control,{type:"text",value:this.state.body,onChange:function(t){return e.handleInputChange(t)},name:"body"})}),Object(S.jsx)(g.a,{className:"t-bgBtn",style:{width:"100%"},type:"submit",children:"Publicar comentario"})]})}}]),n}(s.Component),G=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={comments:void 0,showModal:!1},e.postService=new f,e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.loadComments()}},{key:"loadComments",value:function(){var e=this;this.postService.getAllComments(this.props.postId).then((function(t){e.setState({comments:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.comments;return Object(S.jsxs)(S.Fragment,{children:[t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(g.a,{onClick:function(){return e.setState({showModal:!0})},className:"t-bgBtn",size:"sm",style:{marginBottom:"20px"},children:"A\xf1adir un comentario"}),Object(S.jsxs)(y.a,{show:e.state.showModal,onHide:function(){return e.setState({showModal:!1})},children:[Object(S.jsxs)(y.a.Header,{children:[" ",Object(S.jsx)(y.a.Title,{children:"Nuevo comentario"})," "]}),Object(S.jsx)(y.a.Body,{children:Object(S.jsx)(D,{postId:e.props.postId,loggedUser:e.props.loggedUser,closeModal:function(){return e.setState({showModal:!1})},refreshComments:function(){return e.loadComments()}})})]})]}):Object(S.jsx)(T.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})}),t&&!t.length?Object(S.jsx)("p",{children:"Este post no tiene comentarios a\xfan"}):t?Object(S.jsx)(B.a,{children:t.map((function(e){return Object(S.jsx)(F,Object(m.a)({},e),e._id)}))}):void 0]})}}]),n}(s.Component),H=function(e){var t=e.loggedUser,n=e.postId;return Object(S.jsxs)(h.a,{children:[Object(S.jsx)("hr",{}),Object(S.jsx)("h3",{children:"Comentarios de este post"}),Object(S.jsx)("hr",{}),Object(S.jsx)(G,{loggedUser:t,postId:n})]})},R=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={post:void 0},e.postService=new f,e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.postId;this.postService.getOnePost(t).then((function(t){return e.setState({post:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return Object(S.jsx)(h.a,{children:this.state.post?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(P,Object(m.a)(Object(m.a)({},this.state.post),{},{authorIsUser:this.props.loggedUser._id===this.state.post.author._id})),Object(S.jsx)("hr",{}),Object(S.jsx)(H,{loggedUser:this.props.loggedUser,postId:this.state.post._id})]}):Object(S.jsx)(T.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})})})}}]),n}(s.Component),z=function(e){var t=e._id,n=e.title,s=e.author,a=e.body;e.history;return Object(S.jsx)(L.b,{to:"/posts/".concat(t),className:"no-decor",children:Object(S.jsx)(M.a,{className:"marged t-bgColor",children:Object(S.jsxs)(M.a.Body,{className:"lat-padded",children:[Object(S.jsx)(M.a.Title,{className:"big",children:n}),Object(S.jsx)(M.a.Subtitle,{className:"mb-2 text-muted",children:s.displayName}),Object(S.jsx)(M.a.Text,{children:Object(S.jsx)("span",{className:"t-italic",dangerouslySetInnerHTML:{__html:a.slice(0,100).replace(/(<([^>]+)>)/gi,"")}})})]})})})},V=(n(353),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={posts:void 0},e.postService=new f,e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.loadPosts()}},{key:"loadPosts",value:function(){var e=this;this.postService.getAllPosts().then((function(t){return e.setState({posts:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.posts;return t?Object(S.jsxs)(S.Fragment,{children:["USER"===this.props.loggedUser.role?Object(S.jsx)(L.b,{to:"/edit-post/new",className:"t-bgBtn btn btn-primary",children:"Crear nuevo post"}):null,Object(S.jsx)("div",{className:"posts-list",children:t.map((function(t){return Object(S.jsx)(z,Object(m.a)(Object(m.a)({},t),{},{authorIsUser:e.props.loggedUser._id===t.author._id,history:e.props.history}),t._id)}))})]}):Object(S.jsx)(T.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})})}}]),n}(s.Component)),q=function(e){var t=e.loggedUser,n=e.history;return Object(S.jsxs)(h.a,{children:[Object(S.jsx)("hr",{}),Object(S.jsx)(V,{loggedUser:t,history:n})]})},J=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={username:"",pwd:"",displayName:"",email:"",birthdate:"",error:{exists:!1,message:null}},e.authService=new b,e}return Object(i.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n=t.name,s=t.value;this.setState(Object(A.a)({},n,s))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.authService.signup(this.state).then((function(e){t.props.history.push("/login")})).catch((function(e){t.setState({error:{exists:!0,message:"Error al crear tu usuario. Quiz\xe1 ya seas user. \n                                Si no lo eres, comprueba tus datos (recuerda que todos \n                                los campos son obligatorios)."}})}))}},{key:"resetError",value:function(){this.setState({error:{exists:!1,message:null}})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(O.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(S.jsxs)(O.a.Group,{controlId:"displayName",children:[Object(S.jsx)(O.a.Label,{children:"Nombre completo"}),Object(S.jsx)(O.a.Control,{type:"text",value:this.state.displayName,onChange:function(t){return e.handleInputChange(t)},name:"displayName"})]}),Object(S.jsxs)(O.a.Group,{controlId:"username",children:[Object(S.jsx)(O.a.Label,{children:"Nombre de usuario"}),Object(S.jsx)(O.a.Control,{type:"text",value:this.state.username,onChange:function(t){return e.handleInputChange(t)},name:"username"})]}),Object(S.jsxs)(O.a.Group,{controlId:"email",children:[Object(S.jsx)(O.a.Label,{children:"Mail"}),Object(S.jsx)(O.a.Control,{type:"email",value:this.state.email,onChange:function(t){return e.handleInputChange(t)},name:"email"})]}),Object(S.jsxs)(O.a.Group,{controlId:"password",children:[Object(S.jsx)(O.a.Label,{children:"Password"}),Object(S.jsx)(O.a.Control,{type:"password",value:this.state.pwd,onChange:function(t){return e.handleInputChange(t)},name:"pwd"})]}),Object(S.jsxs)(O.a.Group,{controlId:"birthdate",children:[Object(S.jsx)(O.a.Label,{children:"Fecha de nacimiento"}),Object(S.jsx)(O.a.Control,{type:"date",value:this.state.birthdate,onChange:function(t){return e.handleInputChange(t)},name:"birthdate"})]}),Object(S.jsx)(g.a,{className:"t-bgBtn",style:{width:"100%",marginTop:"20px"},type:"submit",children:"\xa1Vamos all\xe1!"})]}),this.state.error.exists?Object(S.jsx)(C,{message:this.state.error.message,onClose:function(){return e.resetError()}}):null]})}}]),n}(s.Component),Q=function(e){var t=e.storeUser,n=e.history;return Object(S.jsx)(h.a,{children:Object(S.jsx)(B.a,{className:"justify-content-center",children:Object(S.jsxs)(E.a,{md:6,children:[Object(S.jsx)("h1",{children:"Registro"}),Object(S.jsx)("hr",{}),Object(S.jsx)(J,{storeUser:t,history:n}),Object(S.jsx)("hr",{})]})})})},W=function e(){var t=this;Object(o.a)(this,e),this.newTag=function(e){return t.app.post("/new-tag",e)},this.getOneTag=function(e){return t.app.get("/edit-tag/".concat(e))},this.editTag=function(e){return t.app.put("/".concat(e.tagId),e)},this.getAllUsers=function(){return t.app.get("/users-list")},this.deleteOneUser=function(e){return t.app.delete("/delete-user/".concat(e))},this.deleteOnePost=function(e){return t.app.delete("/delete-post/".concat(e))},this.deleteOneTag=function(e){return t.app.delete("/delete-tag/".concat(e))},this.app=d.a.create({baseURL:"".concat("https://ih-tagger.herokuapp.com/api","/admin"),withCredentials:!0})},X=(n(354),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={tag:{name:"",_id:"",description:""}},s.adminService=new W,s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setState({tag:this.props.tag})}},{key:"handleSubmit",value:function(e){var t=this;this.adminService.editTag(this.state.tag._id).then((function(){t.props.refreshTags()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(S.jsx)(E.a,{md:4,children:Object(S.jsx)(M.a,{children:Object(S.jsxs)(M.a.Body,{children:[Object(S.jsx)(M.a.Title,{children:this.state.tag.name}),Object(S.jsx)(M.a.Text,{children:this.state.tag.description}),"ADMIN"===e.props.loggedUser.role?Object(S.jsx)(g.a,{className:"editBtn",onClick:function(){return e.handleSubmit(e.state.tag.tagId)},children:Object(S.jsx)(_.a,{})}):Object(S.jsx)(g.a,{className:"favBtn",onClick:function(){return e.handleSubmit(e.state.tag.tagId)},children:Object(S.jsx)(_.b,{})})]})})})}}]),n}(s.Component)),Y=function e(){var t=this;Object(o.a)(this,e),this.getAllTags=function(){return t.app.get("/tag-list")},this.app=d.a.create({baseURL:"".concat("https://ih-tagger.herokuapp.com/api","/tag"),withCredentials:!0})},K=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={tag:{name:"",description:""},error:{exists:!1,message:null}},s.adminService=new W,s}return Object(i.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n=t.name,s=t.value;this.setState({tag:Object(m.a)(Object(m.a)({},this.state.tag),{},Object(A.a)({},n,s))})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.adminService.newTag(this.state.tag).then((function(){t.props.closeModal(),t.props.refreshTags()})).catch((function(e){t.setState({error:{exists:!0,message:"Error al crear la etiqueta. No se admiten nombres duplicados ni vac\xedos."}})}))}},{key:"resetError",value:function(){this.setState({error:{exists:!1,message:null}})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(O.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(S.jsxs)(O.a.Group,{controlId:"name",children:[Object(S.jsx)(O.a.Label,{children:"Nombre"}),Object(S.jsx)(O.a.Control,{type:"text",value:this.state.name,onChange:function(t){return e.handleInputChange(t)},name:"name"})]}),Object(S.jsxs)(O.a.Group,{controlId:"description",children:[Object(S.jsx)(O.a.Label,{children:"Descripci\xf3n"}),Object(S.jsx)(O.a.Control,{type:"text",value:this.state.description,onChange:function(t){return e.handleInputChange(t)},name:"description"})]}),Object(S.jsx)(g.a,{className:"t-bgBtn",style:{width:"100%"},type:"submit",children:"Crear tag"})]}),this.state.error.exists?Object(S.jsx)(C,{message:this.state.error.message,onClose:function(){return e.resetError()}}):null]})}}]),n}(s.Component),Z=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={tags:void 0,showModal:!1},e.adminService=new W,e.tagService=new Y,e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.loadTags()}},{key:"loadTags",value:function(){var e=this;this.tagService.getAllTags().then((function(t){e.setState({tags:t.data.allTags})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.tags;return t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(g.a,{onClick:function(){return e.setState({showModal:!0})},className:"t-bgBtn",size:"sm",style:{marginBottom:"20px"},children:"A\xf1adir una tag nueva"}),Object(S.jsx)(B.a,{children:t.map((function(t){return Object(S.jsx)(X,{tag:Object(m.a)({},t),refreshTags:function(){return e.loadTags()},loggedUser:e.props.loggedUser},t._id)}))}),Object(S.jsx)(g.a,{className:"goBackBtn",onClick:function(){return e.props.history.push("/my-profile")},children:"Volver"}),Object(S.jsxs)(y.a,{show:this.state.showModal,onHide:function(){return e.setState({showModal:!1})},children:[Object(S.jsxs)(y.a.Header,{children:[" ",Object(S.jsx)(y.a.Title,{children:"Nuevo tag"})," "]}),Object(S.jsx)(y.a.Body,{children:Object(S.jsx)(K,{loggedUser:this.props.loggedUser,closeModal:function(){return e.setState({showModal:!1})},refreshTags:function(){return e.loadTags()}})})]})]}):Object(S.jsx)(T.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})})}}]),n}(s.Component),$=function(e){var t=e.loggedUser,n=e.history;return Object(S.jsxs)(h.a,{children:[Object(S.jsx)("h1",{children:"Listado de tags"}),Object(S.jsx)("hr",{}),Object(S.jsx)(Z,{loggedUser:t,history:n})]})},ee=function(e){var t=e.displayName,n=e.username,s=e.image,a=e.email;return Object(S.jsx)(h.a,{children:Object(S.jsx)(B.a,{children:Object(S.jsx)(E.a,{children:Object(S.jsx)(M.a,{children:Object(S.jsxs)(M.a.Body,{children:[Object(S.jsx)(M.a.Img,{children:s}),Object(S.jsx)(M.a.Title,{children:n}),Object(S.jsx)(M.a.Subtitle,{className:"mb-2 text-muted",children:t}),Object(S.jsx)(M.a.Text,{children:a})]})})})})})},te=function(){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(L.b,{to:"/users",className:"btn btn-primary t-bgBtn",children:"Lista de Users"})})},ne=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={user:void 0},e.userService=new x,e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.userService.myProfile().then((function(t){return e.setState({user:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return Object(S.jsx)(h.a,{children:this.state.user?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("h1",{children:["Perfil de ",this.state.user.username]}),Object(S.jsx)("hr",{}),Object(S.jsx)(ee,Object(m.a)({},this.state.user)),Object(S.jsx)("hr",{}),Object(S.jsx)(L.b,{to:"/tags",className:"btn btn-primary t-bgBtn right-marged",children:"Lista de tags"}),"ADMIN"===this.state.user.role?Object(S.jsx)(te,{}):null]}):Object(S.jsx)(T.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})})})}}]),n}(s.Component),se=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={username:"",pwd:"",error:{exists:!1,message:null}},e.authService=new b,e}return Object(i.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n=t.name,s=t.value;this.setState(Object(A.a)({},n,s))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.authService.login(this.state).then((function(e){t.props.storeUser(e.data),t.props.history.push("/")})).catch((function(e){t.setState({error:{exists:!0,message:"El usuario o la contrase\xf1a son incorrectos."}})}))}},{key:"resetError",value:function(){this.setState({error:{exists:!1,message:null}})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(O.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(S.jsxs)(O.a.Group,{controlId:"username",children:[Object(S.jsx)(O.a.Label,{children:"Nombre de usuario"}),Object(S.jsx)(O.a.Control,{type:"text",value:this.state.username,onChange:function(t){return e.handleInputChange(t)},name:"username"})]}),Object(S.jsxs)(O.a.Group,{controlId:"password",children:[Object(S.jsx)(O.a.Label,{children:"Password"}),Object(S.jsx)(O.a.Control,{type:"password",value:this.state.pwd,onChange:function(t){return e.handleInputChange(t)},name:"pwd"})]}),Object(S.jsx)(g.a,{className:"t-bgBtn",style:{width:"100%",marginTop:"20px"},type:"submit",children:"Iniciar sesi\xf3n"})]}),this.state.error.exists?Object(S.jsx)(C,{message:this.state.error.message,onClose:function(){return e.resetError()}}):null]})}}]),n}(s.Component),ae=function(e){var t=e.storeUser,n=e.history;return Object(S.jsx)(h.a,{children:Object(S.jsx)(B.a,{className:"justify-content-center",children:Object(S.jsxs)(E.a,{md:6,children:[Object(S.jsx)("h1",{children:"Inicio de sesi\xf3n"}),Object(S.jsx)("hr",{}),Object(S.jsx)(se,{storeUser:t,history:n}),Object(S.jsx)("hr",{}),Object(S.jsx)(L.b,{to:"/signup",className:"btn t-bgBtn btn-primary",children:"\xbfA\xfan no eres un tagger? \xa1\xdanete!"})]})})})},re=(n(355),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={user:{username:"",_id:"",displayName:""}},s.adminService=new W,s}return Object(i.a)(n,[{key:"componentDidMount",value:function(){console.log(this.props.user),this.setState({user:this.props.user})}},{key:"handleSubmit",value:function(e){var t=this;this.adminService.deleteOneUser(this.state.user._id).then((function(){t.props.refreshUsers()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(S.jsx)(E.a,{md:3,children:Object(S.jsx)(M.a,{children:Object(S.jsxs)(M.a.Body,{children:[Object(S.jsx)(M.a.Title,{children:this.state.user.username}),Object(S.jsx)(M.a.Subtitle,{className:"mb-2 text-muted",children:this.state.user.displayName}),Object(S.jsx)(g.a,{className:"removeUserBtn btn-danger",onClick:function(){return e.handleSubmit(e.state.user.userId)},children:Object(S.jsx)(_.c,{})})]})})})}}]),n}(s.Component)),ce=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={users:void 0},e.adminService=new W,e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.loadUsers()}},{key:"loadUsers",value:function(){var e=this;this.adminService.getAllUsers().then((function(t){e.setState({users:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.users;return t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(B.a,{children:t.map((function(t){return Object(S.jsx)(re,{user:Object(m.a)({},t),refreshUsers:function(){return e.loadUsers()}},t._id)}))}),Object(S.jsx)(g.a,{onClick:function(){return e.props.history.push("/my-profile")},className:"goBackBtn",children:"Volver"})]}):Object(S.jsx)(T.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})})}}]),n}(s.Component),oe=function(e){var t=e.loggedUser,n=e.history;return Object(S.jsxs)(h.a,{children:[Object(S.jsx)("h1",{children:"Listado de users"}),Object(S.jsx)("hr",{}),Object(S.jsx)(ce,{loggedUser:t,history:n})]})},ie=n(117),le=function(e){var t=e.component,n=e.loggedUser,s=e.hasPermission,a=e.path,r=Object(ie.a)(e,["component","loggedUser","hasPermission","path"]);return Object(S.jsx)(p.b,Object(m.a)(Object(m.a)({path:a},r),{},{render:function(e){return n&&s?Object(S.jsx)(t,Object(m.a)(Object(m.a)({},e),{},{loggedUser:n,history:e.history})):Object(S.jsx)(p.a,{to:"/login"})}}))},ue=function(e){var t=e.component,n=e.loggedUser,s=e.storeUser,a=e.path,r=Object(ie.a)(e,["component","loggedUser","storeUser","path"]);return Object(S.jsx)(p.b,Object(m.a)(Object(m.a)({path:a},r),{},{render:function(e){return n?Object(S.jsx)(p.a,{to:"/"}):Object(S.jsx)(t,Object(m.a)(Object(m.a)({},e),{},{storeUser:s,history:e.history}))}}))},he=function(e){var t=e.storeUser,n=e.loggedUser;return Object(S.jsxs)(p.d,{children:["(",Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(ue,{exact:!0,path:"/login",loggedUser:n,storeUser:t,component:ae}),Object(S.jsx)(ue,{exact:!0,path:"/signup",loggedUser:n,storeUser:t,component:Q}),Object(S.jsx)(le,{exact:!0,path:"/",loggedUser:n,hasPermission:!0,component:q}),Object(S.jsx)(le,{exact:!0,path:"/users",loggedUser:n,hasPermission:n&&"ADMIN"===n.role,component:oe}),Object(S.jsx)(le,{exact:!0,path:"/my-profile",loggedUser:n,hasPermission:!0,component:ne}),Object(S.jsx)(le,{exact:!0,path:"/tags",loggedUser:n,hasPermission:!0,component:$}),Object(S.jsx)(le,{path:"/posts/:postId",loggedUser:n,hasPermission:!0,component:R}),Object(S.jsx)(le,{path:"/edit-post/:postId",loggedUser:n,hasPermission:n&&"USER"===n.role,component:I})]}),")"]})},je=n(611),de=n(612),be=n(608),pe=(n(356),function(e){var t=e.loggedUser,n=e.storeUser;return Object(S.jsxs)(je.a,{variant:"dark",className:"justify-content-around navigation",children:[Object(S.jsx)(L.b,{to:"/",children:Object(S.jsx)(je.a.Brand,{children:Object(S.jsx)("img",{src:"/white-logo.png",width:"30",height:"30",className:"d-inline-block align-top t-logo",alt:"tagger logo"})})}),Object(S.jsx)(de.a,{className:"mr-auto",children:t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(L.b,{to:"/my-profile",className:"nav-link t-profileBtn",children:Object(S.jsxs)("p",{children:[" | Hola, ",t.username," | "]})}),Object(S.jsxs)(be.a,{title:"Men\xfa",className:"t-link",children:["USER"===t.role?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(L.b,{to:"/posts",className:"nav-link",children:Object(S.jsx)("p",{children:"Mis posts"})}),Object(S.jsx)(L.b,{to:"/edit-post/new",className:"nav-link",children:Object(S.jsx)("p",{children:"Post nuevo"})})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(L.b,{to:"/tags",className:"nav-link",children:Object(S.jsx)("p",{children:"Lista de tags"})}),Object(S.jsx)(L.b,{to:"/users",className:"nav-link",children:Object(S.jsx)("p",{children:"Lista de users"})})]}),Object(S.jsx)("span",{onClick:function(){(new b).logout().then((function(){n(void 0)})).catch((function(e){return console.log(e)}))},className:"nav-link logoutBtn",children:"Cerrar sesi\xf3n"})]})]}):Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(p.a,{to:"/login"})})})]})}),me=(n(358),function(){return Object(S.jsx)("footer",{children:"Proudly founded by Nat Canales | All rights reserved"})}),Oe=n(226),ge=n.n(Oe),xe={width:"99vw",height:"100%",position:"fixed",top:0,left:0,zIndex:-1},fe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(S.jsx)("div",{style:xe,children:Object(S.jsx)(ge.a,{params:{particles:{number:{value:200,density:{enable:!0,value_area:1803.4120608655228}},color:{value:"#FF0080"},shape:{type:"star",stroke:{width:0,color:"#000000"},polygon:{nb_sides:4},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:1,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:0,color:"#000",opacity:.3687847739990702,width:.6413648243462091},move:{enable:!0,speed:2,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"window",events:{onhover:{enable:!0,mode:"repulse"},onclick:{enable:!1,mode:"bubble"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:100,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0}})})}}]),n}(s.Component),ve=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).storeUser=function(t){e.setState({loggedUser:t})},e.fetchUser=function(){e.authService.isLoggedIn().then((function(t){return e.setState({loggedUser:t.data})})).catch((function(){return e.setState({loggedUser:void 0})}))},e.state={loggedUser:void 0},e.authService=new b,e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(pe,{storeUser:function(t){return e.storeUser(t)},loggedUser:this.state.loggedUser}),Object(S.jsxs)(h.a,{className:"padded",children:[Object(S.jsx)(he,{storeUser:function(t){return e.storeUser(t)},loggedUser:this.state.loggedUser}),Object(S.jsx)(fe,{})]}),Object(S.jsx)(me,{})]})}}]),n}(s.Component);c.a.render(Object(S.jsx)(L.a,{children:Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(ve,{})})}),document.getElementById("root"))}},[[600,1,2]]]);
//# sourceMappingURL=main.6ce31580.chunk.js.map