(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{138:function(e,t,s){},387:function(e,t,s){},388:function(e,t,s){},389:function(e,t,s){},390:function(e,t,s){},392:function(e,t,s){},634:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),r=s(35),i=s.n(r),o=s(13),c=s(15),l=s(17),u=s(16),h=s(640),d=(s(260),s(138),s(59)),j=s.n(d),b=function e(){var t=this;Object(o.a)(this,e),this.signup=function(e){return t.app.post("/new-user",e)},this.login=function(e){return t.app.post("/login",e)},this.logout=function(){return t.app.get("/logout")},this.isLoggedIn=function(){return t.app.get("/isLoggedIn")},this.app=j.a.create({baseURL:"".concat("https://ih-tagger.herokuapp.com/api","/auth"),withCredentials:!0})},p=s(30),g=s(14),m=s(645),O=s(248),v=function e(){var t=this;Object(o.a)(this,e),this.myProfile=function(){return t.app.get("/current-user")},this.seeOtherProfile=function(e){return t.app.get("/".concat(e))},this.addFavUser=function(e){return t.app.put("/add-fav-user/".concat(e))},this.addFavTag=function(e){return t.app.put("/add-fav-tag/".concat(e))},this.getFavTags=function(){return t.app.get("/fav-tag-list")},this.removeFavTag=function(e){return t.app.put("/remove-fav-tag/".concat(e))},this.app=j.a.create({baseURL:"".concat("https://ih-tagger.herokuapp.com/api","/user"),withCredentials:!0})},x=function e(){var t=this;Object(o.a)(this,e),this.newPost=function(e){return t.app.post("/new",e)},this.getOnePost=function(e){return t.app.get("/".concat(e))},this.getByAuthor=function(e){return t.app.get("/getByAuthor/".concat(e))},this.getAllPosts=function(){return t.app.get("/getAllPosts")},this.getPostsByTags=function(e){return t.app.post("/getPostsByTags",e)},this.editPost=function(e){return t.app.put("/".concat(e._id),e)},this.newComment=function(e,s){return t.app.post("/".concat(e,"/new-comment"),s)},this.getAllComments=function(e){return t.app.get("/".concat(e,"/allComments"))},this.app=j.a.create({baseURL:"".concat("https://ih-tagger.herokuapp.com/api","/post"),withCredentials:!0})},f=(s(173),s(253)),y=s(644),S=s(1),C=function(e){var t=e.message,s=e.onClose,a=Object(n.useState)(!0),r=Object(f.a)(a,2),i=r[0],o=r[1];return Object(S.jsxs)(y.a,{show:i,children:[Object(S.jsx)(y.a.Header,{children:Object(S.jsx)(y.a.Title,{children:"Ups..."})}),Object(S.jsx)(y.a.Body,{children:Object(S.jsx)("p",{children:t})}),Object(S.jsx)(y.a.Footer,{children:Object(S.jsx)(O.a,{variant:"secondary",onClick:function(){o(!1),s()},children:"Aceptar"})})]})},w=s(25),k=s(252),N=s(249),U=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={editorState:w.EditorState.createEmpty()},e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.setState({editorState:w.EditorState.createWithContent(w.ContentState.createFromBlockArray(Object(w.convertFromHTML)(this.props.postContent)))})}},{key:"onEditorStateChange",value:function(e){this.setState({editorState:e}),this.props.updateState(Object(k.a)(e.getCurrentContent()))}},{key:"render",value:function(){var e=this,t=this.state.editorState;return Object(S.jsx)("div",{children:Object(S.jsx)(N.Editor,{toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"t-postEditor",editorState:t,onEditorStateChange:function(t){return e.onEditorStateChange(t)}})})}}]),s}(n.Component),T=s(255),B=s(254),I=function e(){var t=this;Object(o.a)(this,e),this.getAllTags=function(){return t.app.get("/tag-list")},this.getAvailableTags=function(){return t.app.get("/available-tag-list")},this.app=j.a.create({baseURL:"".concat("https://ih-tagger.herokuapp.com/api","/tag"),withCredentials:!0})},M=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={tags:[]},e.tagService=new I,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.tagService.getAllTags().then((function(t){var s=[];t.data.forEach((function(e){s.push({value:e._id,label:e.name})})),e.setState({tags:s})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=Object(B.a)();return Object(S.jsx)(T.a,{classNamePrefix:"tag-selection",closeMenuOnSelect:!1,components:t,isMulti:!0,options:this.state.tags,onChange:function(t){return e.props.updateTags(t)},defaultValue:this.props.initialTags,styles:{menu:function(e){return Object(g.a)(Object(g.a)({},e),{},{zIndex:9999})}}})}}]),s}(n.Component),F=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={post:{_id:null,title:"",body:"",tags:[]},error:{exists:!1,message:null},hasLoaded:!1},e.userService=new v,e.postService=new x,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.postId;if("new"!==t)this.postService.getOnePost(t).then((function(t){e.setState({post:t.data,hasLoaded:!0})})).catch((function(e){return console.log(e)}));else{var s=Object(g.a)({},this.state);s.hasLoaded=!0,this.setState(s)}}},{key:"updateTags",value:function(e){var t=Object(g.a)({},this.state.post),s=[];e.forEach((function(e){s.push(e.value)})),t.tags=s,this.setState({post:t})}},{key:"updateState",value:function(e){var t=Object(g.a)({},this.state.post);t.body=e,this.setState({post:t})}},{key:"handleTitleChange",value:function(e){var t=Object(g.a)({},this.state.post),s=e.target.value;t.title=s,this.setState({post:t})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),(null===this.state.post._id?this.postService.newPost(this.state.post):this.postService.editPost(this.state.post)).then((function(){t.props.history.push("/")})).catch((function(e){t.setState({error:{exists:!0,message:"Error al publicar el post. Aseg\xfarate de indicar t\xedtulo y texto."}})}))}},{key:"resetError",value:function(){this.setState({error:{exists:!1,message:null}})}},{key:"render",value:function(){var e=this;return function(){if(e.state.hasLoaded){var t=[];return e.state.post.tags.forEach((function(e){t.push({value:e._id,label:e.name})})),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(m.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(S.jsxs)(m.a.Group,{controlId:"title",children:[Object(S.jsx)(m.a.Label,{children:"T\xedtulo"}),Object(S.jsx)(m.a.Control,{type:"text",value:e.state.post.title,onChange:function(t){return e.handleTitleChange(t)},name:"title"}),Object(S.jsx)(M,{initialTags:t,updateTags:function(t){return e.updateTags(t)}})]}),Object(S.jsx)("br",{}),Object(S.jsx)(U,{updateState:function(t){return e.updateState(t)},postContent:e.state.post.body}),Object(S.jsx)(O.a,{className:"t-bgBtn",type:"submit",children:"Publicar post"}),Object(S.jsx)(O.a,{onClick:e.props.history.goBack,className:"btn goBackBtn btn-primary",children:"Volver"})]}),e.state.error.exists?Object(S.jsx)(C,{message:e.state.error.message,onClose:function(){return e.resetError()}}):null]})}return null}()}}]),s}(n.Component),_=s(642),P=s(641),E=s(648),D=s(72),L=s(19),A=function(e){var t=e._id,s=e.title,n=e.body,a=e.tags,r=e.author,i=e.authorIsUser;return Object(S.jsx)(h.a,{children:Object(S.jsx)(P.a,{children:Object(S.jsx)(E.a,{className:"t-card",children:Object(S.jsxs)(E.a.Body,{children:[Object(S.jsx)(E.a.Title,{children:s}),Object(S.jsx)(E.a.Subtitle,{className:"mb-2 text-muted",children:Object(S.jsx)(L.b,{className:"grey",to:"/user/".concat(r.username),children:r.displayName})}),Object(S.jsx)(E.a.Body,{children:Object(S.jsx)("div",{dangerouslySetInnerHTML:{__html:n}})}),Object(S.jsxs)("span",{children:["Tags: ",a.map((function(e){return Object(S.jsx)("span",{className:"t-taglabel",children:e.name},e._id)}))]}),i?Object(S.jsx)(L.b,{to:"/edit-post/".concat(t),children:Object(S.jsx)(O.a,{className:"editBtn",children:Object(S.jsx)(D.a,{})})}):null]})})})})},G=s(250),z=function(e){var t=e.body,s=e.author,n=e.date;return Object(S.jsx)(G.a,{md:3,children:Object(S.jsx)(E.a,{className:"t-card",children:Object(S.jsxs)(E.a.Body,{children:[Object(S.jsx)(E.a.Text,{children:t}),Object(S.jsx)(E.a.Subtitle,{className:"mb-2 text-muted",children:s.displayName}),Object(S.jsx)(E.a.Text,{children:n})]})})})},H=s(60),R=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={comment:{body:""}},n.postService=new x,n}return Object(c.a)(s,[{key:"handleInputChange",value:function(e){var t=e.target,s=t.name,n=t.value;this.setState({comment:Object(g.a)(Object(g.a)({},this.state.comment),{},Object(H.a)({},s,n))})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.postService.newComment(this.props.postId,this.state.comment).then((function(){t.props.closeModal(),t.props.refreshComments()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(S.jsxs)(m.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(S.jsx)(m.a.Group,{controlId:"body",children:Object(S.jsx)(m.a.Control,{type:"text",value:this.state.body,onChange:function(t){return e.handleInputChange(t)},name:"body"})}),Object(S.jsx)(O.a,{className:"t-bgBtn",style:{width:"100%"},type:"submit",children:"Publicar comentario"})]})}}]),s}(n.Component),V=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={comments:void 0,showModal:!1},e.postService=new x,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.loadComments()}},{key:"loadComments",value:function(){var e=this;this.postService.getAllComments(this.props.postId).then((function(t){e.setState({comments:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.comments;return Object(S.jsxs)(S.Fragment,{children:[t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(O.a,{onClick:function(){return e.setState({showModal:!0})},className:"t-bgBtn",size:"sm",style:{marginBottom:"20px"},children:"A\xf1adir un comentario"}),Object(S.jsxs)(y.a,{show:e.state.showModal,onHide:function(){return e.setState({showModal:!1})},children:[Object(S.jsxs)(y.a.Header,{children:[" ",Object(S.jsx)(y.a.Title,{children:"Nuevo comentario"})," "]}),Object(S.jsx)(y.a.Body,{children:Object(S.jsx)(R,{postId:e.props.postId,loggedUser:e.props.loggedUser,closeModal:function(){return e.setState({showModal:!1})},refreshComments:function(){return e.loadComments()}})})]})]}):Object(S.jsx)(_.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})}),t&&!t.length?Object(S.jsx)("p",{children:"Este post no tiene comentarios a\xfan"}):t?Object(S.jsx)(P.a,{children:t.map((function(e){return Object(S.jsx)(z,Object(g.a)({},e),e._id)}))}):void 0]})}}]),s}(n.Component),q=function(e){var t=e.loggedUser,s=e.postId;return Object(S.jsxs)(h.a,{children:[Object(S.jsx)("hr",{}),Object(S.jsx)("h3",{children:"Comentarios de este post"}),Object(S.jsx)("hr",{}),Object(S.jsx)(V,{loggedUser:t,postId:s})]})},J=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={post:void 0},e.postService=new x,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.postId;this.postService.getOnePost(t).then((function(t){return e.setState({post:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return Object(S.jsx)(h.a,{children:this.state.post?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(A,Object(g.a)(Object(g.a)({},this.state.post),{},{authorIsUser:this.props.loggedUser._id===this.state.post.author._id})),Object(S.jsx)(O.a,{onClick:this.props.history.goBack,className:"btn goBackBtn btn-primary",children:"Volver"}),Object(S.jsx)(q,{loggedUser:this.props.loggedUser,postId:this.state.post._id})]}):Object(S.jsx)(_.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})})})}}]),s}(n.Component),Y=function(e){var t=e._id,s=e.title,n=e.author,a=e.body;e.history;return Object(S.jsx)(L.b,{to:"/posts/".concat(t),className:"no-decor",children:Object(S.jsx)(E.a,{className:"marged t-bgColor t-card",children:Object(S.jsxs)(E.a.Body,{className:"lat-padded",children:[Object(S.jsx)(E.a.Title,{className:"big",children:s}),Object(S.jsx)(E.a.Subtitle,{className:"mb-2 text-muted",children:n.displayName}),Object(S.jsx)(E.a.Text,{children:Object(S.jsx)("span",{className:"t-italic",dangerouslySetInnerHTML:{__html:a.slice(0,100).replace(/(<([^>]+)>)/gi,"")}})})]})})})},Q=(s(387),function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={posts:void 0},e.postService=new x,e.userService=new v,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.loadPosts()}},{key:"loadPosts",value:function(){var e=this;this.userService.getFavTags().then((function(t){return t.data.length?e.postService.getPostsByTags({tags:t.data}):e.postService.getAllPosts()})).then((function(t){return e.setState({posts:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.posts;return t?Object(S.jsxs)(S.Fragment,{children:["USER"===this.props.loggedUser.role?Object(S.jsx)(L.b,{to:"/edit-post/new",className:"t-bgBtn btn btn-primary",children:"Crear nuevo post"}):null,Object(S.jsx)("div",{className:"posts-list",children:t.map((function(t){return Object(S.jsx)(Y,Object(g.a)(Object(g.a)({},t),{},{authorIsUser:e.props.loggedUser._id===t.author._id,history:e.props.history}),t._id)}))})]}):Object(S.jsx)(_.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})})}}]),s}(n.Component)),W=function(e){var t=e.loggedUser,s=e.history;return Object(S.jsxs)(h.a,{children:[Object(S.jsx)("hr",{}),Object(S.jsx)(Q,{loggedUser:t,history:s})]})},X=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={username:"",pwd:"",displayName:"",email:"",birthdate:"",error:{exists:!1,message:null}},e.authService=new b,e}return Object(c.a)(s,[{key:"handleInputChange",value:function(e){var t=e.target,s=t.name,n=t.value;if("birthdate"===s){var a=Date.now()-new Date(n).getTime();if(Math.abs(new Date(a).getUTCFullYear()-1970)<16)return void this.setState({error:{exists:!0,message:"Necesitas tener 16 a\xf1os o m\xe1s para ser un tagger."}})}this.setState(Object(H.a)({},s,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.authService.signup(this.state).then((function(e){t.props.history.push("/login")})).catch((function(e){t.setState({error:{exists:!0,message:"Error al crear tu usuario. Quiz\xe1 ya seas user. \n                                Si no lo eres, comprueba tus datos (recuerda que todos \n                                los campos son obligatorios)."}})}))}},{key:"resetError",value:function(){this.setState({error:{exists:!1,message:null}})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(m.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(S.jsxs)(m.a.Group,{controlId:"displayName",children:[Object(S.jsx)(m.a.Label,{children:"Nombre completo"}),Object(S.jsx)(m.a.Control,{type:"text",value:this.state.displayName,onChange:function(t){return e.handleInputChange(t)},name:"displayName"})]}),Object(S.jsxs)(m.a.Group,{controlId:"username",children:[Object(S.jsx)(m.a.Label,{children:"Nombre de usuario"}),Object(S.jsx)(m.a.Control,{type:"text",value:this.state.username,onChange:function(t){return e.handleInputChange(t)},name:"username"})]}),Object(S.jsxs)(m.a.Group,{controlId:"email",children:[Object(S.jsx)(m.a.Label,{children:"Mail"}),Object(S.jsx)(m.a.Control,{type:"email",value:this.state.email,onChange:function(t){return e.handleInputChange(t)},name:"email"})]}),Object(S.jsxs)(m.a.Group,{controlId:"password",children:[Object(S.jsx)(m.a.Label,{children:"Password"}),Object(S.jsx)(m.a.Control,{type:"password",value:this.state.pwd,onChange:function(t){return e.handleInputChange(t)},name:"pwd"})]}),Object(S.jsxs)(m.a.Group,{controlId:"birthdate",children:[Object(S.jsx)(m.a.Label,{children:"Fecha de nacimiento"}),Object(S.jsx)(m.a.Control,{type:"date",value:this.state.birthdate,onChange:function(t){return e.handleInputChange(t)},name:"birthdate"})]}),Object(S.jsx)(O.a,{className:"t-bgBtn",style:{width:"100%"},type:"submit",children:"\xa1Vamos all\xe1!"}),Object(S.jsx)(L.b,{className:"btn t-bgBtn btn-primary t-bgBtn",style:{width:"100%"},to:"/login",children:"S\xed que soy tagger"})]}),this.state.error.exists?Object(S.jsx)(C,{message:this.state.error.message,onClose:function(){return e.resetError()}}):null]})}}]),s}(n.Component),K=function(e){var t=e.storeUser,s=e.history;return Object(S.jsx)(h.a,{children:Object(S.jsx)(P.a,{className:"justify-content-center",children:Object(S.jsxs)(G.a,{md:6,children:[Object(S.jsx)("h1",{children:"Registro"}),Object(S.jsx)("hr",{}),Object(S.jsx)(X,{storeUser:t,history:s}),Object(S.jsx)("hr",{})]})})})},Z=function e(){var t=this;Object(o.a)(this,e),this.newTag=function(e){return t.app.post("/new-tag",e)},this.getOneTag=function(e){return t.app.get("/edit-tag/".concat(e))},this.editTag=function(e){return t.app.put("/edit-tag/".concat(e._id),e)},this.getAllUsers=function(){return t.app.get("/users-list")},this.deleteOneUser=function(e){return t.app.delete("/delete-user/".concat(e))},this.deleteOnePost=function(e){return t.app.delete("/delete-post/".concat(e))},this.deleteOneTag=function(e){return t.app.delete("/delete-tag/".concat(e))},this.app=j.a.create({baseURL:"".concat("https://ih-tagger.herokuapp.com/api","/admin"),withCredentials:!0})},$=(s(388),function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={tag:{name:"",_id:"",description:""}},n.adminService=new Z,n.userService=new v,n}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.setState({tag:this.props.tag})}},{key:"handleSubmit",value:function(e){var t=this;this.adminService.editTag(this.state.tag).then((function(){t.props.refreshTags()})).catch((function(e){return console.log(e)}))}},{key:"addFavBtn",value:function(){var e=this;this.userService.addFavTag(this.state.tag.name).then((function(){e.props.refreshTags()})).catch((function(e){return console.log(e)}))}},{key:"removeFavBtn",value:function(){var e=this;this.userService.removeFavTag(this.state.tag.name).then((function(){e.props.refreshTags()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(S.jsx)(G.a,{md:4,children:Object(S.jsx)(E.a,{className:"t-card",children:Object(S.jsxs)(E.a.Body,{children:[Object(S.jsx)(E.a.Title,{children:this.state.tag.name}),Object(S.jsx)(E.a.Text,{children:this.state.tag.description}),"ADMIN"===e.props.loggedUser.role?Object(S.jsx)(O.a,{className:"editBtn",onClick:function(){return e.props.showEditModal()},children:Object(S.jsx)(D.a,{})}):e.props.isFav?Object(S.jsx)(O.a,{className:"btn btn-danger removeFavBtn",onClick:function(){return e.removeFavBtn()},children:Object(S.jsx)(D.c,{})}):Object(S.jsx)(O.a,{className:"favBtn",onClick:function(){return e.addFavBtn()},children:Object(S.jsx)(D.b,{})})]})})})}}]),s}(n.Component)),ee=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={tag:{_id:null,name:"",description:""},error:{exists:!1,message:null},isNew:!0},n.adminService=new Z,n}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.setState({isNew:this.props.isNew,tag:Object(g.a)({},this.props.tagData)})}},{key:"handleInputChange",value:function(e){var t=e.target,s=t.name,n=t.value;this.setState({tag:Object(g.a)(Object(g.a)({},this.state.tag),{},Object(H.a)({},s,n))})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),(this.state.isNew?this.adminService.newTag(this.state.tag):this.adminService.editTag(this.state.tag)).then((function(){t.props.closeModal(),t.props.refreshTags()})).catch((function(e){t.setState({error:{exists:!0,message:"Error al ".concat(t.state.isNew?"crear":"editar"," la etiqueta. No se admiten nombres duplicados ni vac\xedos.")}})}))}},{key:"resetError",value:function(){this.setState({error:{exists:!1,message:null}})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(m.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(S.jsxs)(m.a.Group,{controlId:"name",children:[Object(S.jsx)(m.a.Label,{children:"Nombre"}),Object(S.jsx)(m.a.Control,{type:"text",value:this.state.tag.name,onChange:function(t){return e.handleInputChange(t)},name:"name"})]}),Object(S.jsxs)(m.a.Group,{controlId:"description",children:[Object(S.jsx)(m.a.Label,{children:"Descripci\xf3n"}),Object(S.jsx)(m.a.Control,{type:"text",value:this.state.tag.description,onChange:function(t){return e.handleInputChange(t)},name:"description"})]}),Object(S.jsxs)(O.a,{className:"t-bgBtn",style:{width:"100%"},type:"submit",children:[this.state.isNew?"Crear":"Editar"," tag"]})]}),this.state.error.exists?Object(S.jsx)(C,{message:this.state.error.message,onClose:function(){return e.resetError()}}):null]})}}]),s}(n.Component),te=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={tags:void 0,showModal:!1,isCreationModal:!1,selectedTagData:{_id:null,name:"",description:""}},e.adminService=new Z,e.tagService=new I,e.userService=new v,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.loadTags()}},{key:"loadTags",value:function(){var e=this;(this.props.onlyFav?this.userService.getFavTags():"ADMIN"===this.props.loggedUser.role?this.tagService.getAllTags():this.tagService.getAvailableTags()).then((function(t){e.setState({tags:[]}),e.setState({tags:t.data})})).catch((function(e){return console.log(e)}))}},{key:"showEditModal",value:function(e){var t=e._id,s=e.name,n=e.description;this.setState({showModal:!0,isCreationModal:!1,selectedTagData:{_id:t,name:s,description:n}})}},{key:"render",value:function(){var e=this,t=this.state.tags;return t?Object(S.jsxs)(S.Fragment,{children:["ADMIN"===e.props.loggedUser.role?Object(S.jsx)(O.a,{onClick:function(){return e.setState({showModal:!0,isCreationModal:!0})},className:"t-bgBtn",size:"sm",style:{marginBottom:"20px"},children:" A\xf1adir una tag nueva"}):null,Object(S.jsx)(P.a,{children:t.map((function(t){return Object(S.jsx)($,{tag:Object(g.a)({},t),refreshTags:function(){return e.loadTags()},loggedUser:e.props.loggedUser,showEditModal:function(){return e.showEditModal(Object(g.a)({},t))},isFav:e.props.onlyFav},t._id)}))}),Object(S.jsx)(O.a,{onClick:this.props.history.goBack,className:"btn goBackBtn btn-primary",children:"Volver"}),Object(S.jsxs)(y.a,{show:this.state.showModal,onHide:function(){return e.setState({showModal:!1})},children:[Object(S.jsxs)(y.a.Header,{children:[" ",Object(S.jsxs)(y.a.Title,{children:[this.state.isCreationModal?"Nueva":"Editar"," tag"]})," "]}),Object(S.jsx)(y.a.Body,{children:Object(S.jsx)(ee,{loggedUser:this.props.loggedUser,closeModal:function(){return e.setState({showModal:!1})},refreshTags:function(){return e.loadTags()},isNew:this.state.isCreationModal,tagData:Object(g.a)({},this.state.selectedTagData)})})]})]}):Object(S.jsx)(_.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})})}}]),s}(n.Component),se=function(e){var t=e.loggedUser,s=e.history,n=e.onlyFav;return Object(S.jsxs)(h.a,{children:[Object(S.jsx)("h1",{children:n?"Tags favoritas":"Listado de tags"}),Object(S.jsx)("hr",{}),Object(S.jsx)(te,{loggedUser:t,history:s,onlyFav:n})]})},ne=function(e){var t=e.displayName,s=e.username,n=e.image,a=e.email;return Object(S.jsx)(h.a,{children:Object(S.jsx)(P.a,{children:Object(S.jsx)(G.a,{children:Object(S.jsx)(E.a,{className:"t-card",children:Object(S.jsxs)(E.a.Body,{children:[Object(S.jsx)(E.a.Img,{children:n}),Object(S.jsx)(E.a.Title,{children:s}),Object(S.jsx)(E.a.Subtitle,{className:"mb-2 text-muted",children:t}),Object(S.jsx)(E.a.Text,{children:a})]})})})})})},ae=function(){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(L.b,{to:"/users",className:"btn btn-primary t-bgBtn",children:"Lista de Users"})})},re=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={user:void 0,posts:[]},e.userService=new v,e.postService=new x,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){var e,t=this;if(this.props.isOwnProfile)e=this.userService.myProfile();else{var s=this.props.match.params.username;e=this.userService.seeOtherProfile(s)}e.then((function(e){return t.setState({user:e.data}),e.data})).then((function(e){return t.postService.getByAuthor(e._id)})).then((function(e){t.setState({posts:e.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(S.jsx)(h.a,{children:this.state.user?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("h1",{children:["Perfil de ",this.state.user.username]}),Object(S.jsx)(ne,Object(g.a)({},this.state.user)),Object(S.jsx)(O.a,{onClick:this.props.history.goBack,className:"btn goBackBtn btn-primary",children:"Volver"}),Object(S.jsx)("hr",{}),"ADMIN"===e.props.loggedUser.role&&e.props.loggedUser.username===e.state.user.username?Object(S.jsx)(ae,{}):e.props.isOwnProfile?Object(S.jsx)(L.b,{to:"/fav-tags",className:"btn t-bgBtn btn-primary",children:"Lista de tags favoritas"}):void 0,Object(S.jsx)("div",{className:"posts-list",children:this.state.posts.map((function(t){return Object(S.jsx)(Y,Object(g.a)(Object(g.a)({},t),{},{authorIsUser:e.props.loggedUser._id===t.author._id,history:e.props.history}),t._id)}))})]}):Object(S.jsx)(_.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})})})}}]),s}(n.Component),ie=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={username:"",pwd:"",error:{exists:!1,message:null}},e.authService=new b,e}return Object(c.a)(s,[{key:"handleInputChange",value:function(e){var t=e.target,s=t.name,n=t.value;this.setState(Object(H.a)({},s,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.authService.login(this.state).then((function(e){t.props.storeUser(e.data),t.props.history.push("/")})).catch((function(e){t.setState({error:{exists:!0,message:"El usuario o la contrase\xf1a son incorrectos."}})}))}},{key:"resetError",value:function(){this.setState({error:{exists:!1,message:null}})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(m.a,{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(S.jsxs)(m.a.Group,{controlId:"username",children:[Object(S.jsx)(m.a.Label,{children:"Nombre de usuario"}),Object(S.jsx)(m.a.Control,{type:"text",value:this.state.username,onChange:function(t){return e.handleInputChange(t)},name:"username"})]}),Object(S.jsxs)(m.a.Group,{controlId:"password",children:[Object(S.jsx)(m.a.Label,{children:"Password"}),Object(S.jsx)(m.a.Control,{type:"password",value:this.state.pwd,onChange:function(t){return e.handleInputChange(t)},name:"pwd"})]}),Object(S.jsx)(O.a,{className:"t-bgBtn",style:{width:"100%",marginTop:"20px"},type:"submit",children:"Iniciar sesi\xf3n"})]}),this.state.error.exists?Object(S.jsx)(C,{message:this.state.error.message,onClose:function(){return e.resetError()}}):null]})}}]),s}(n.Component),oe=function(e){var t=e.storeUser,s=e.history;return Object(S.jsx)(h.a,{children:Object(S.jsx)(P.a,{className:"justify-content-center",children:Object(S.jsxs)(G.a,{md:6,children:[Object(S.jsx)("h1",{children:"Inicio de sesi\xf3n"}),Object(S.jsx)("hr",{}),Object(S.jsx)(ie,{storeUser:t,history:s}),Object(S.jsx)("hr",{}),Object(S.jsx)(L.b,{to:"/signup",className:"btn t-bgBtn btn-primary",children:"\xbfA\xfan no eres un tagger? \xa1\xdanete!"})]})})})},ce=(s(389),function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={user:{username:"",_id:"",displayName:""}},n.adminService=new Z,n}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.setState({user:this.props.user})}},{key:"handleSubmit",value:function(e){var t=this;this.adminService.deleteOneUser(this.state.user._id).then((function(){t.props.refreshUsers()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(S.jsx)(G.a,{md:3,children:Object(S.jsx)(E.a,{className:"t-card",children:Object(S.jsxs)(E.a.Body,{children:[Object(S.jsx)(E.a.Title,{children:Object(S.jsx)(L.b,{className:"black",to:"/user/".concat(this.state.user.username),children:this.state.user.username})}),Object(S.jsx)(E.a.Subtitle,{className:"mb-2 text-muted",children:this.state.user.displayName}),Object(S.jsx)(O.a,{className:"removeUserBtn btn-danger",onClick:function(){return e.handleSubmit(e.state.user.userId)},children:Object(S.jsx)(D.c,{})})]})})})}}]),s}(n.Component)),le=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={users:void 0},e.adminService=new Z,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.loadUsers()}},{key:"loadUsers",value:function(){var e=this;this.adminService.getAllUsers().then((function(t){e.setState({users:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.users;return t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(P.a,{children:t.map((function(t){return Object(S.jsx)(ce,{user:Object(g.a)({},t),refreshUsers:function(){return e.loadUsers()}},t._id)}))}),Object(S.jsx)(O.a,{onClick:this.props.history.goBack,className:"btn goBackBtn btn-primary",children:"Volver"})]}):Object(S.jsx)(_.a,{animation:"border",role:"status",children:Object(S.jsx)("span",{className:"sr-only"})})}}]),s}(n.Component),ue=function(e){var t=e.loggedUser,s=e.history;return Object(S.jsxs)(h.a,{children:[Object(S.jsx)("h1",{children:"Listado de users"}),Object(S.jsx)("hr",{}),Object(S.jsx)(le,{loggedUser:t,history:s})]})},he=s(136),de=function(e){var t=e.component,s=e.loggedUser,n=e.hasPermission,a=e.path,r=Object(he.a)(e,["component","loggedUser","hasPermission","path"]);return Object(S.jsx)(p.b,Object(g.a)(Object(g.a)({path:a},r),{},{render:function(e){return s&&n?Object(S.jsx)(t,Object(g.a)(Object(g.a)({},e),{},{loggedUser:s,history:e.history},r)):Object(S.jsx)(p.a,{to:"/login"})}}))},je=function(e){var t=e.component,s=e.loggedUser,n=e.storeUser,a=e.path,r=Object(he.a)(e,["component","loggedUser","storeUser","path"]);return Object(S.jsx)(p.b,Object(g.a)(Object(g.a)({path:a},r),{},{render:function(e){return s?Object(S.jsx)(p.a,{to:"/"}):Object(S.jsx)(t,Object(g.a)(Object(g.a)({},e),{},{storeUser:n,history:e.history}))}}))},be=function(e){var t=e.storeUser,s=e.loggedUser;return Object(S.jsxs)(p.d,{children:["(",Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(je,{exact:!0,path:"/login",loggedUser:s,storeUser:t,component:oe}),Object(S.jsx)(je,{exact:!0,path:"/signup",loggedUser:s,storeUser:t,component:K}),Object(S.jsx)(de,{exact:!0,path:"/",loggedUser:s,hasPermission:!0,component:W}),Object(S.jsx)(de,{exact:!0,path:"/users",loggedUser:s,hasPermission:s&&"ADMIN"===s.role,component:ue}),Object(S.jsx)(de,{exact:!0,path:"/my-profile",loggedUser:s,hasPermission:!0,isOwnProfile:!0,component:re}),Object(S.jsx)(de,{exact:!0,path:"/user/:username",loggedUser:s,hasPermission:!0,isOwnProfile:!1,component:re}),Object(S.jsx)(de,{exact:!0,path:"/tags",loggedUser:s,hasPermission:!0,onlyFav:!1,component:se}),Object(S.jsx)(de,{exact:!0,path:"/fav-tags",loggedUser:s,hasPermission:!0,onlyFav:!0,component:se}),Object(S.jsx)(de,{path:"/posts/:postId",loggedUser:s,hasPermission:!0,component:J}),Object(S.jsx)(de,{path:"/edit-post/:postId",loggedUser:s,hasPermission:s&&"USER"===s.role,component:F})]}),")"]})},pe=s(646),ge=s(647),me=s(643),Oe=(s(390),function(e){var t=e.loggedUser,s=e.storeUser;return Object(S.jsxs)(pe.a,{variant:"dark",className:"justify-content-around navigation",children:[Object(S.jsx)(L.b,{to:"/",children:Object(S.jsx)(pe.a.Brand,{children:Object(S.jsx)("img",{src:"/white-logo.png",width:"30",height:"30",className:"d-inline-block align-top t-logo",alt:"tagger logo"})})}),Object(S.jsx)(ge.a,{className:"mr-auto",children:t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(L.b,{to:"/my-profile",className:"nav-link t-profileBtn",children:Object(S.jsxs)("p",{children:[" | Hola, ",t.username," | "]})}),Object(S.jsxs)(me.a,{title:"Men\xfa",className:"t-link",children:["USER"===t.role?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(L.b,{to:"/edit-post/new",className:"nav-link",children:Object(S.jsx)("p",{children:"Post nuevo"})}),Object(S.jsx)(L.b,{to:"/tags",className:"nav-link",children:Object(S.jsx)("p",{children:"Lista de tags"})})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(L.b,{to:"/tags",className:"nav-link",children:Object(S.jsx)("p",{children:"Lista de tags"})}),Object(S.jsx)(L.b,{to:"/users",className:"nav-link",children:Object(S.jsx)("p",{children:"Lista de users"})})]}),Object(S.jsx)("span",{onClick:function(){(new b).logout().then((function(){s(void 0)})).catch((function(e){return console.log(e)}))},className:"nav-link logoutBtn",children:"Cerrar sesi\xf3n"})]})]}):Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(p.a,{to:"/login"})})})]})}),ve=(s(392),function(){return Object(S.jsx)("footer",{children:"Proudly founded by Nat Canales | All rights reserved"})}),xe=s(251),fe=s.n(xe),ye={width:"99vw",height:"100%",position:"fixed",top:0,left:0,zIndex:-1},Se=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){return Object(S.jsx)("div",{style:ye,children:Object(S.jsx)(fe.a,{params:{particles:{number:{value:200,density:{enable:!0,value_area:1803.4120608655228}},color:{value:"#FF0080"},shape:{type:"star",stroke:{width:0,color:"#000000"},polygon:{nb_sides:4},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:1,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:0,color:"#000",opacity:.3687847739990702,width:.6413648243462091},move:{enable:!0,speed:2,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"window",events:{onhover:{enable:!0,mode:"repulse"},onclick:{enable:!1,mode:"bubble"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:100,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0}})})}}]),s}(n.Component),Ce=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).storeUser=function(t){e.setState({loggedUser:t})},e.fetchUser=function(){e.authService.isLoggedIn().then((function(t){return e.setState({loggedUser:t.data})})).catch((function(){return e.setState({loggedUser:void 0})}))},e.state={loggedUser:void 0},e.authService=new b,e}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(Oe,{storeUser:function(t){return e.storeUser(t)},loggedUser:this.state.loggedUser}),Object(S.jsxs)(h.a,{className:"padded",children:[Object(S.jsx)(be,{storeUser:function(t){return e.storeUser(t)},loggedUser:this.state.loggedUser}),Object(S.jsx)(Se,{})]}),Object(S.jsx)(ve,{})]})}}]),s}(n.Component);i.a.render(Object(S.jsx)(L.a,{children:Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(Ce,{})})}),document.getElementById("root"))}},[[634,1,2]]]);
//# sourceMappingURL=main.93ef535a.chunk.js.map